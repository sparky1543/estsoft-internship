## 1. 오늘 할 일


- [ ]  플랜 업그레이드 정합성 확인
- [ ]  결제주기 업그레이드 정합성 확인
- [ ]  첫 구독 집계 이벤트 찾아보기
    - [ ]  Stripe 에서 찾아보고 없으면 발생할 만한 이벤트 생각하기

## 2. 업무 진행상황


<aside>

**오전 (10:00-12:00)**

**플랜 업그레이드 정합성 확인**

- 원인 1: 9월에 구독한 사람이 10월에 업그레이드 했을 경우 10월 퍼널 조회에서 빠진다
- 원인2: 이벤트가 update인 사람이 starter→creator일 경우 creator로 덮어씌워진다 (추정)

**첫 구독 결제 판별**

- Invoice 결제 성공 이벤트에 property 추가하기
    - 첫 결제 t/f
    - interval
    - prev 플랜

**오후 (13:00-16:00)**

**업그레이드 회원 정합성 검증 (Event log 확인)**

- 플랜 업그레이드 시 Amplitude property 변화
    - 예시: Creator → PRO(x3) → PRO(x4) → PRO(x5)의 **invoice.payment_succeeded**
    - Creator 구독 시작: subscription_create - Creator
    - PRO(x3) 업그레이드: subscription_update - Creator
    - PRO(x4) 업그레이드: subscription_update - Creator
    - PRO(x5) 업그레이드: subscription_update - Creator
    - 모두 시작 플랜으로 찍힌다
- **customer.subscription.updated**도 시작 플랜으로 찍힌다
- **complete_update_plan** 에 플랜 변경된 이름이 찍힌다(plan_name)
    - plan_status는 정확하지 않다
    
    → 업그레이드만 찍히는게 아니고 취소예약이나 결제 실패 등 subscription_update가 있을때 다 찍히지만 그럴때는 플랜이름이 변경되어있지는 않다.
    

**면담**

- 이 때까지 했던 업무 자료 정리하기
- utm_source별 url 어디서 왔는지 필터링

</aside>

## 3. 다음 업무계획


- [ ]  amplitude 정합성 검증 페이지에 검증한 내용 정리(플랜 업그레이드 내용)
- [ ]  stripe sigma 쿼리들 정리
